#!/usr/bin/env ruby
#
# DITA for Small Teams 
#
# Post-receive server-side git hook
# to update DFST Link Management database
# with any changes as a result of updates
# to the repository.
#--------------------------------------------
#
# In the context of the docker containers the network details
# are invariant.
require_relative "./UpdateBaseXOnReceive"

class Updater
  def initialize(from, to, branch)
     @from = from
     @to = to
     @branch = branch
  end

  def update()
     puts "Updating using #{@from}, #{@to}, #{@branch}"
  end
end


puts "Running post-receive..."

STDIN.each do |line|
   puts "line=/#{line.chomp}/"
   from, to, branch, = line.chomp.split(/\s+/)

   puts "from=#{from}"
   puts "to=#{to}"
   puts "branch=#{branch}"
   updater = Updater.new(from, to, branch)
   updater.update()

end


puts "Post-receive done."